"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _constants = require("./constants");

var _themeConfig = _interopRequireDefault(require("./theme-config"));

/**
 * Sets the theme globally at runtime. This updates the `data-theme` and `data-color-scheme` attributes on your page's <html> tag.
 *
 * @param {string} themeId - Which theme should be used by default.
 * @param {string} [shouldMatchSystem=false] - Whether the theme should automatically switch between themes to match the system preference.
 *
 * @example
 * ```
 * // Set light theme as the default theme, but switch to others based on the system color theme.
 * setGlobalTheme('light', true);
 * ```
 */
var setGlobalTheme = function setGlobalTheme(themeId) {
  var shouldMatchSystem = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  var theme = Object.values(_themeConfig.default).find(function (_ref) {
    var id = _ref.id;
    return id === themeId;
  });

  if (process.env.NODE_ENV !== 'production') {
    if (!theme) {
      var themeIds = Object.values(_themeConfig.default).map(function (_ref2) {
        var id = _ref2.id;
        return id;
      });
      throw new Error("setGlobalTheme only accepts themes: ".concat(themeIds.join(', ')));
    }
  }

  if (!theme) {
    return;
  }

  var element = document.documentElement;
  element.setAttribute(_constants.THEME_DATA_ATTRIBUTE, theme.id);

  if (theme.attributes.type === 'color') {
    element.setAttribute(_constants.COLOR_MODE_ATTRIBUTE, theme.attributes.mode);
  }

  if (shouldMatchSystem) {
    element.setAttribute(_constants.COLOR_MODE_ATTRIBUTE, 'auto');
  }
};

var _default = setGlobalTheme;
exports.default = _default;